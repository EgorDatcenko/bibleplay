:root {
  --color-bg: #f9f6ef;
  --color-bg-secondary: #faf8f4;
  --color-card: #fff;
  --color-card-dark: #2c1810;
  --color-border: #ece6da;
  --color-border-strong: #d4a373;
  --color-text: #2c1810;
  --color-text-secondary: #7c6f57;
  --color-toast-bg: #fff;
  --color-toast-error-bg: #ffeaea;
  --color-toast-error-text: #b71c1c;
  --color-sidebar: #faf8f4;
  --color-sidebar-border: #eee;
  --color-card-green: #2d5016;
  --color-card-blue: #1a365d;
  --color-card-red: #742a2a;
}

@media (prefers-color-scheme: dark) {
  :root {
    --color-bg: #181818;
    --color-bg-secondary: #232323;
    --color-card: #232323;
    --color-card-dark: #fff;
    --color-border: #333;
    --color-border-strong: #d4a373;
    --color-text: #f7f7f7;
    --color-text-secondary: #bdbdbd;
    --color-toast-bg: #232323;
    --color-toast-error-bg: #3a1a1a;
    --color-toast-error-text: #ff8a80;
    --color-sidebar: #232323;
    --color-sidebar-border: #333;
    --color-card-green: #355c2d;
    --color-card-blue: #22345d;
    --color-card-red: #8a2a2a;
  }
}

body, html {
  overflow-x: hidden;
  background: var(--color-bg);
  color: var(--color-text);
}

#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
  background: var(--color-bg);
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  background: var(--color-card);
  color: var(--color-text);
  border: 2px solid var(--color-border);
  box-shadow: 0 2px 8px rgba(0,0,0,0.10);
  border-radius: 12px;
  transition: background 0.2s, color 0.2s;
}

/* Drag preview для карточки */
.card-drag-preview {
  opacity: 0.8;
  box-shadow: 0 4px 16px rgba(0,0,0,0.18);
  border: 2px solid var(--color-border-strong);
  background: var(--color-card);
  color: var(--color-text);
  border-radius: 12px;
  pointer-events: none;
  z-index: 9999;
}

.read-the-docs {
  color: #888;
}

/* --- Мобильный layout: деление на 3 части --- */
/*
@media (max-width: 700px) {
  body, html {
    max-width: 420px !important;
    width: 100vw !important;
    margin: 0 auto !important;
    padding: 0 !important;
    overflow-x: hidden !important;
    box-sizing: border-box !important;
  }
  .main-menu, .lobby-modal, .rules-modal, .rules-content, .mobile-game-layout, .mobile-top, .mobile-center, .mobile-bottom {
    max-width: 420px !important;
    width: 100vw !important;
    margin: 0 auto !important;
    padding: 0 !important;
    overflow-x: hidden !important;
    box-sizing: border-box !important;
  }
  .mobile-game-layout {
    margin: 0 auto !important;
    max-width: 420px !important;
    width: 100vw !important;
    text-align: center !important;
    display: flex !important;
    flex-direction: column !important;
    height: 100vh !important;
    min-height: 100vh !important;
    background: var(--color-bg);
  }
  .mobile-top {
    display: grid !important;
    grid-template-columns: repeat(3, 1fr) !important;
    gap: 8px !important;
    align-items: flex-start !important;
    justify-content: center !important;
    padding: 8px 4px 0 4px !important;
    min-height: 33vh !important;
    max-height: 34vh !important;
    background: var(--color-sidebar) !important;
    border-bottom: 1px solid var(--color-sidebar-border) !important;
    box-sizing: border-box !important;
  }
  .mobile-top > div {
    align-items: flex-start !important;
    justify-content: flex-start !important;
    width: 100% !important;
    text-align: left !important;
    gap: 6px !important;
    min-width: 0 !important;
    max-width: 100% !important;
    padding: 0 2px !important;
  }
  .mobile-center {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    min-height: 33vh !important;
    max-height: 34vh !important;
    background: var(--color-bg) !important;
    margin: 0 auto !important;
    justify-content: center !important;
    text-align: center !important;
    max-width: 420px !important;
    width: 100vw !important;
    gap: 12px !important;
    box-sizing: border-box !important;
  }
  .game-table {
    width: 100vw !important;
    max-width: 420px !important;
    margin: 0 auto !important;
    padding: 0 !important;
    overflow-x: hidden !important;
    overflow-y: hidden !important;
    white-space: nowrap !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    box-sizing: border-box !important;
    flex-wrap: nowrap !important;
  }
  .game-table > div {
    display: inline-flex !important;
    gap: 0 !important;
    align-items: center !important;
    min-height: 120px !important;
    height: 120px !important;
    max-height: 120px !important;
    padding-right: 0 !important;
    box-sizing: content-box !important;
    margin: 0 auto !important;
  }
  .game-table .DropZone {
    width: 28px !important;
    min-width: 28px !important;
    max-width: 28px !important;
    height: 120px !important;
    min-height: 120px !important;
    max-height: 120px !important;
    background: rgba(212,163,115,0.10) !important;
    border: 2px dashed #d4a373 !important;
    border-radius: 10px !important;
    margin: 0 2px !important;
    box-sizing: border-box !important;
    transition: background 0.2s;
  }
  .mobile-bottom {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    min-height: 36vh !important;
    max-height: 38vh !important;
    background: var(--color-bg) !important;
    border-top: 1px solid var(--color-sidebar-border) !important;
    padding-bottom: 8px !important;
    gap: 8px !important;
    margin: 0 auto !important;
    justify-content: center !important;
    text-align: center !important;
    max-width: 420px !important;
    width: 100vw !important;
  }
  .hand {
    flex-wrap: nowrap !important;
    gap: 2px !important;
    overflow-x: auto !important;
    width: 100vw !important;
    max-width: 420px !important;
    margin: 0 auto !important;
    justify-content: center !important;
    text-align: center !important;
    min-height: 130px !important;
    max-height: 140px !important;
    align-items: flex-end !important;
    box-sizing: border-box !important;
  }
  .card, .game-table .card, .game-table .DropZone {
    width: 64px !important;
    height: 120px !important;
    min-height: 120px !important;
    max-height: 120px !important;
    padding: 0 !important;
    font-size: 12px !important;
    flex: 0 0 auto !important;
    margin: 0 2px !important;
    box-sizing: border-box !important;
    color: #fff !important;
    background: linear-gradient(180deg, rgba(0,0,0,0.10) 0%, rgba(0,0,0,0.18) 100%);
  }
  .card .card-image {
    height: 80px !important;
    min-height: 80px !important;
    max-height: 80px !important;
    width: 100% !important;
    background: #222 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    border-top-left-radius: 12px !important;
    border-top-right-radius: 12px !important;
    overflow: hidden !important;
  }
  .card .card-info {
    height: 40px !important;
    min-height: 40px !important;
    max-height: 40px !important;
    width: 100% !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    color: #fff !important;
    font-size: 12px !important;
    padding: 0 4px !important;
    box-sizing: border-box !important;
  }
  .card-title, .card-order, .card-verse {
    color: #fff !important;
    text-shadow: 0 1px 4px rgba(0,0,0,0.18);
  }
  .rules-button {
    display: block !important;
    position: absolute !important;
    top: 12px !important;
    right: 12px !important;
    padding: 6px 12px !important;
    font-size: 12px !important;
    z-index: 1001 !important;
    background: #742a2a !important;
    color: #fff !important;
    border: none !important;
    border-radius: 8px !important;
    font-weight: 600 !important;
  }
  /* Убираем черную обводку у выбранной/dragged карты */
  .card:focus, .card:active, .card.selected, .card-drag-preview {
    outline: none !important;
    border-color: var(--color-border) !important;
    box-shadow: none !important;
  }


@media (min-width: 701px) {
  .rules-button {
    top: 32px !important;
    right: 32px !important;
    padding: 10px 18px !important;
    font-size: 18px !important;
  }
  .main-menu h1, .main-menu > div:first-child {
    margin-top: 32px !important;
  }
}

  .toast {
    min-width: 120px !important;
    font-size: 13px !important;
    padding: 8px 10px !important;
  }
  .main-menu {
    padding: 10px !important;
  }
  /* Кнопка правил на мобильных */
  /* .rules-button {
    top: 10px !important;
    right: 10px !important;
    padding: 6px 12px !important;
    font-size: 12px !important;
  } */
  /* Модальное окно правил на мобильных */
  .rules-modal {
    padding: 10px !important;
  }
  .rules-content {
    padding: 12px !important;
    max-height: 70vh !important;
  }

/* Удаляю старые закомментированные и конфликтные мобильные стили */

@media (max-width: 700px) {
  .mobile-v2-root {
    min-height: 100vh;
    width: 100vw;
    background: #faf8f4;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    justify-content: flex-start;
    overflow-x: hidden;
    box-sizing: border-box;
    font-family: 'Istok Web', Arial, sans-serif;
  }
  .mobile-v2-header-fixed {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    z-index: 1000;
    background: #faf8f4;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: flex-start;
    padding: 0 12px;
    height: 54px;
    border-bottom: 1px solid #ece6da;
    box-sizing: border-box;
  }
  .mobile-v2-main {
    width: 100vw;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: flex-start;
    box-sizing: border-box;
    padding-left: 0;
    padding-right: 8px;
    padding-top: 0;
  }
  .mobile-v2-logo {
    font-family: 'Pacifico', cursive;
    font-size: 22px;
    color: #2c1810;
    font-weight: 700;
    letter-spacing: 1px;
    margin-right: 18px;
  }
  .mobile-v2-btn {
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 600;
    padding: 8px 18px;
    margin: 0 2px;
    min-width: 90px;
    min-height: 40px;
    cursor: pointer;
    transition: background 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
  }
  .mobile-v2-btn-rules {
    background: #742a2a;
    color: #fff;
    margin-left: auto;
    margin-right: 8px;
  }
  .mobile-v2-btn-exit {
    background: #d4a373;
    color: #fff;
  }
  .mobile-v2-title {
    font-size: 26px;
    font-weight: 700;
    color: #2c1810;
    text-align: left;
    margin: 64px 0 6px 0;
    letter-spacing: 1px;
    /* padding-left: 32px; */
  }
  .mobile-v2-cardsleft {
    color: #7c6f57;
    font-size: 16px;
    margin-bottom: 8px;
    font-weight: 500;
    text-align: left;
    padding-left: 160px;
  }
  .mobile-v2-infocard {
    background: #fff;
    border-radius: 14px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.07);
    border: 1px solid #ece6da;
    padding: 16px 10px 10px 10px;
    margin: 0 !important;
    width: calc(100vw - 2px);
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: center;
    gap: 8px;
    box-sizing: border-box;
    padding-left: 0;
    margin-left: 0;
    max-width: none;
  }
  .mobile-v2-infoblock-row {
    width: 100%;
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    justify-content: flex-start;
    gap: 5px;
    flex-wrap: wrap;
  }
  .mobile-v2-infocard-row {
    width: 100%;
    display: flex;
    flex-direction: row;
    align-items: stretch;
    justify-content: flex-start;
    gap: 12px;
    margin-bottom: 18px;
  }
  .mobile-v2-infocard-metric {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.07);
    border: 1px solid #ece6da;
    padding: 12px 16px 10px 16px;
    min-width: 90px;
    min-height: 60px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    gap: 2px;
  }
  .mobile-v2-metric-label {
    font-size: 14px;
    color: #7c6f57;
    font-weight: 600;
    margin-bottom: 2px;
    text-align: center;
  }
  .mobile-v2-metric-value {
    font-size: 18px;
    color: #2c1810;
    font-weight: 700;
    text-align: center;
  }
  .mobile-v2-timer {
    padding: 6px 0 6px 10px !important;
  }
  .mobile-v2-lives {
    background: #fffbe6;
    border: 1px solid #ffe082;
    border-radius: 8px;
    padding: 6px 16px;
    font-size: 16px;
    color: #2c1810;
    font-weight: 600;
    min-width: 90px;
    text-align: center;
    margin-right: 8px;
  }
  .mobile-v2-score {
    background: #fffbe6;
    border: 1px solid #ffe082;
    border-radius: 8px;
    padding: 6px 16px;
    font-size: 16px;
    color: #2c1810;
    font-weight: 600;
    min-width: 90px;
    text-align: center;
    margin-right: 8px;
  }
  .mobile-v2-progress {
    flex: 1 1 120px;
    min-width: 120px;
    max-width: 180px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: center;
    margin: 0 8px;
  }
  .mobile-v2-progress-label {
    font-size: 14px;
    color: #7c6f57;
    margin-bottom: 2px;
    font-weight: 500;
    text-align: left;
  }
  .mobile-v2-progress-bar {
    width: 100%;
    height: 8px;
    background: #f5e9d6;
    border-radius: 5px;
    margin-bottom: 2px;
    overflow: hidden;
    position: relative;
  }
  .mobile-v2-progress-bar > div {
    height: 100%;
    background: #d4a373;
    border-radius: 5px;
    transition: width 0.3s;
  }
  .mobile-v2-progress-pct {
    font-size: 13px;
    color: #7c6f57;
    text-align: left;
    font-weight: 500;
  }
  .mobile-v2-leaderboard {
    min-width: 110px;
    max-width: 160px;
    background: #faf8f4;
    border-radius: 8px;
    border: 1px solid #ece6da;
    padding: 6px 8px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: flex-start;
    box-sizing: border-box;
  }
  .mobile-v2-leaderboard-label {
    font-size: 14px;
    color: #7c6f57;
    font-weight: 600;
    margin-bottom: 2px;
    text-align: left;
  }
  .mobile-v2-leaderboard-table {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 2px;
  }
  .mobile-v2-leaderboard-row {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    font-size: 14px;
    color: #2c1810;
    font-weight: 500;
    background: transparent;
    border-radius: 6px;
    padding: 2px 4px;
  }
  .mobile-v2-leaderboard-row.active {
    background: #ffe082;
    color: #742a2a;
    font-weight: 700;
  }
  .mobile-v2-tablewrap {
    width: 100%;
    max-width: 420px;
    margin: 0;
    padding: 0;
    min-height: 180px;
    display: flex;
    align-items: flex-start;
    justify-content: flex-start;
    box-sizing: border-box;
    padding-left: 0;
  }
  .mobile-v2-handlabel {
    font-size: 17px;
    color: #2c1810;
    font-weight: 600;
    margin: 4px 0 2px 0;
    text-align: left;
    padding-left: 160px;
  }
  .mobile-v2-handwrap {
    width: 100%;
    max-width: 420px;
    margin: 0 0 12px 0;
    padding: 0;
    display: flex;
    align-items: flex-end;
    justify-content: flex-start;
    box-sizing: border-box;
    padding-left: 0;
    margin-left: 0;
  }
  .mobile-v2-handscroll {
    width: 100%;
    display: flex;
    flex-direction: row;
    align-items: flex-end;
    gap: 12px;
    overflow-x: auto;
    overflow-y: hidden;
    padding-bottom: 8px;
    box-sizing: border-box;
    padding-left: 0;
    margin-left: 0;
  }
  .mobile-v2-infobox {
    background: #fffbe6;
    border: 1px solid #ffe082;
    border-radius: 10px;
    padding: 14px 12px;
    font-size: 15px;
    color: #7c6f57;
    line-height: 1.7;
    max-width: 420px;
    margin: 18px 0 0 0;
    box-sizing: border-box;
    padding-left: 0;
    margin-left: 0;
  }
  .mobile-v2-infobox ol {
    padding-left: 22px;
    margin: 10px 0 0 0;
  }
  /* Убираем старые мобильные стили */
  .mobile-game-root, .mobile-header, .mobile-header-title, .mobile-header-btn, .mobile-info-block, .mobile-single-info, .mobile-game-table-wrap, .mobile-hand-wrap, .mobile-hand-scroll, .mobile-scale-wrapper, .mobile-content, .mobile-sidebar-card, .mobile-sidebar-row, .mobile-sidebar-block { display: none !important; }
}

@media (max-width: 700px) {
  body, html, #root {
    padding: 0 !important;
    margin: 0 !important;
    box-sizing: border-box !important;
    width: 100vw !important;
    max-width: 100vw !important;
  }
  .mobile-v2-main,
  .mobile-v2-infocard,
  .mobile-v2-handwrap,
  .mobile-v2-handscroll,
  .mobile-v2-infobox {
    margin-left: 0 !important;
    padding-left: 0 !important;
    width: 100vw !important;
    max-width: 100vw !important;
    box-sizing: border-box;
  }
  .mobile-v2-infocard {
    margin: 0 0 16px 0 !important;
    padding: 16px 10px 10px 10px;
  }
  .mobile-v2-infobox {
    margin: 18px 0 0 0 !important;
    padding: 14px 12px;
  }
  .mobile-v2-cardsleft {
    padding-left: 130px !important;
  }
  .mobile-v2-timer {
    padding: 6px 0 6px 10px !important;
  }
  /* .mobile-v2-title {
    padding-left: 47px !important;
  } */
  .mobile-v2-infoblock-row {
    gap: 5px;
  }
  .mobile-v2-handlabel {
    margin: 4px 0 2px 0;
  }
  /* остальные стили без изменений */
}

@media (max-width: 700px) {
  .mobile-v2-timer {
    background: #fffbe6;
    border: 1px solid #ffe082;
    border-radius: 8px;
    padding: 6px 16px 6px 18px !important;
    font-size: 16px;
    color: #742a2a;
    font-weight: 600;
    min-width: 70px;
    text-align: center;
    margin-right: 8px;
    box-sizing: border-box;
  }
}

@media (max-width: 700px) {
  .mobile-v2-infoblock-row {
    padding-left: 5px;
  }
  .mobile-v2-infocard {
    gap: 4px;
    margin-bottom: 8px !important;
  }
  .mobile-v2-cardsleft {
    margin-bottom: 4px;
  }
  .mobile-v2-handlabel {
    margin: 2px 0 1px 0;
  }
  .mobile-v2-handwrap {
    margin: 0 0 6px 0;
  }
}

@media (max-width: 413px) {
  .mobile-v2-header-fixed {
    transform: scale(0.85);
    transform-origin: left top;
    height: 46px !important;
  }
  .mobile-v2-title {
    font-size: 18px !important;
    padding-left: 20px !important;
  }
  .mobile-v2-infocard {
    transform: scale(0.92);
    transform-origin: left top;
    padding: 8px 2px 6px 2px !important;
    gap: 2px !important;
  }
  .mobile-v2-infoblock-row {
    gap: 2px !important;
  }
}

@media (min-width: 701px) and (max-width: 1024px) {
  /* Для iPad Mini и подобных планшетов делаем сайдбар компактным и не фиксированным */
  .RoomSidebar, .room-sidebar, .mobile-top {
    width: 120px !important;
    min-width: 120px !important;
    max-width: 120px !important;
    height: 120px !important;
    min-height: 120px !important;
    max-height: 120px !important;
    position: static !important;
    margin: 8px auto 0 auto !important;
    left: 0 !important;
    right: 0 !important;
    top: 0 !important;
    transform: none !important;
    z-index: 10;
    border-radius: 16px !important;
    box-shadow: 0 4px 24px rgba(0,0,0,0.10) !important;
    background: #faf8f4 !important;
    padding: 8px !important;
    display: block !important;
    font-size: 12px !important;
    gap: 4px !important;
  }
  .RoomSidebar *, .room-sidebar * {
    font-size: 12px !important;
  }
}

/* Отключаю выделение и копирование текста и элементов во время игры */
.mobile-v2-root, .mobile-v2-main, .mobile-v2-infocard, .mobile-v2-tablewrap, .mobile-v2-handwrap, .mobile-v2-handscroll, .mobile-v2-title, .mobile-v2-cardsleft, .mobile-v2-header-fixed, .mobile-v2-btn, .mobile-v2-infoblock-row, .mobile-v2-leaderboard, .mobile-v2-leaderboard-row, .mobile-v2-handlabel, .mobile-v2-infobox, .mobile-v2-metric-label, .mobile-v2-metric-value, .mobile-v2-timer, .mobile-v2-progress, .mobile-v2-progress-label, .mobile-v2-progress-bar, .mobile-v2-progress-pct, .mobile-v2-leaderboard-label, .mobile-v2-leaderboard-table, .mobile-v2-leaderboard-row.active, .mobile-v2-tablewrap, .mobile-v2-handwrap, .mobile-v2-handscroll, .mobile-v2-infobox, .mobile-v2-infobox ol, .card, .card-info, .card-image, .DropZone, .game-table, .room-sidebar, .RoomSidebar, .mobile-top, .mobile-center, .mobile-bottom, .main-menu, .lobby-modal, .rules-modal, .rules-content, .mobile-game-layout, .mobile-header, .mobile-header-title, .mobile-header-btn, .mobile-info-block, .mobile-single-info, .mobile-game-table-wrap, .mobile-hand-wrap, .mobile-hand-scroll, .mobile-scale-wrapper, .mobile-content, .mobile-sidebar-card, .mobile-sidebar-row, .mobile-sidebar-block {
  user-select: none !important;
  -webkit-user-select: none !important;
  -ms-user-select: none !important;
}
